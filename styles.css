/* =========================
   THEME / RESETS
========================= */
:root{
  --navbar-height:3.5rem;
  --bg:#0b1220;
  --panel:#0f172a;
  --text:#f8fafc;
  --muted:#cbd5e1;
  --accent:#22c55e;
  --focus:#3b82f6;
  --border:#1f2937;
  --chip:#94a3b81f;
  --chip-border:#64748b;
  --danger:#b91c1c;
}
*{box-sizing:border-box}
html, body { height:100%; margin:0; }
body{
  background:var(--bg);
  color:var(--text);
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* =========================
   LAYOUT: TOPBAR
========================= */
.topbar{
  position:fixed; left:0; right:0; top:0; height:var(--navbar-height); /* 56px */
  display:flex; align-items:center; gap:0.625rem; /* 10px */
  padding:0 0.75rem; /* 12px */
  background:#111827d0;
  border-bottom:0.0625rem solid var(--border); /* 1px */
  backdrop-filter:blur(0.5rem); /* 8px */
  -webkit-backdrop-filter:blur(0.5rem);
  z-index:1000;
  pointer-events:auto;
}

.topbar h1{margin:0;font-size:1rem;font-weight:700;letter-spacing:0.018rem}
/* reactivamos los controles dentro de topbar */
.topbar .hamburger,
.topbar select,
.topbar { pointer-events:auto; }

.topbar select{
  margin-left:auto;
  appearance:none;
  background:#1f2937; color:var(--text);
  border:0.0625rem solid #374151;
  border-radius:0.625rem; /* 10px */
  padding:0.375rem 0.625rem; /* 6px 10px */
  min-height:2.25rem; /* 36px */
}
.info-btn{
  margin-left:0.375rem; /* 6px */
  min-width:2.25rem; min-height:2.25rem; /* 36px */
  border-radius:0.625rem; border:0.0625rem solid #374151;
  background:#1f2937; color:var(--text); cursor:pointer;
}

/* Hamburger */
.hamburger{
  width:2.5rem; height:2.25rem; /* 40px, 36px */
  display:inline-flex; align-items:center; justify-content:center;
  border-radius:0.625rem; border:0.0625rem solid #374151;
  background:#1f2937; color:var(--text); cursor:pointer;
}
.hamburger .bars, .hamburger .bars::before, .hamburger .bars::after{
  content:""; display:block; width:1.125rem; height:0.125rem; /* 18px, 2px */
  background:var(--text); position:relative; border-radius:0.125rem;
}
.hamburger .bars::before{ position:absolute; top:-0.375rem } /* -6px */
.hamburger .bars::after{ position:absolute; top:0.375rem }   /* 6px */

/* =========================
   LAYOUT: SIDEBAR + MAP
========================= */
#layout{
  display:flex;
  height:calc(100vh - var(--navbar-height));
  margin-top:var(--navbar-height);
}
#layout #sidebar{
  flex:1;
  overflow-y:auto;
  position:relative;
  top:auto; bottom:auto; width:auto; z-index:auto;
}
#layout #glossary{
  flex:1;
  overflow-y:auto;
  position:relative;
  top:auto; bottom:auto; right:auto; width:auto; z-index:auto;
  border-left:0.0625rem solid var(--border);
  border-right:none;
}
#map-container{
  flex:2;
  position:relative;
  min-width:0;
}
#map{
  position:absolute; top:0; left:0; right:0; bottom:0;
  background:#0b1220; z-index:0; pointer-events:auto;
}

@media (max-width:48rem){ /* 768px */
  #layout #sidebar{ flex:2; }
  #layout #glossary{ flex:2; }
  #map-container{ flex:1; }
}

/* =========================
   BASEMAP SWITCHER
========================= */
.basemap-switcher{
  position:absolute; left:0.75rem; top:0.75rem; /* 12px */
  display:flex; gap:0.375rem; flex-wrap:wrap; /* 6px */
  padding:0.5rem; /* 8px */
  background:#111827d0; border:0.0625rem solid var(--border); border-radius:0.625rem;
  backdrop-filter:blur(0.5rem); -webkit-backdrop-filter:blur(0.5rem);
  z-index:1001;
  max-width:calc(100% - 1.5rem); /* 24px */
  pointer-events:none;
}
.basemap-switcher button{
  border:0.0625rem solid #374151; border-radius:999px;
  background:#1f2937; color:var(--text);
  padding:0.375rem 0.625rem; font-size:0.8125rem; cursor:pointer; /* 13px */
  min-height:2rem; /* 32px */
  pointer-events:auto;
}
.basemap-switcher button.active{
  border-color:var(--accent);
  box-shadow:0 0 0 0.0625rem var(--accent) inset;
}

/* Controles Mapbox */
.mapboxgl-ctrl-top-right{ top:0.75rem; right:0.75rem; }

/* Mapbox canvas and overlays */
.mapboxgl-canvas{ pointer-events:auto; }
.map-health{
  position:absolute;bottom:0.625rem;right:0.625rem; /* 10px */
  background:#111827d0;color:var(--text);
  padding:0.25rem 0.5rem; border-radius:0.375rem; font-size:0.75rem; z-index:1000; /* 4px 8px 6px 12px */
}
#map-error{
  position:absolute;top:0.75rem;left:50%;transform:translateX(-50%);
  background:var(--danger);color:#fff;padding:0.375rem 0.625rem;border-radius:0.375rem;z-index:2000;font-size:0.875rem; /* 6px 10px 6px 14px */
}

/* =========================
   PANELS
========================= */
.panel{
  position:fixed; top:var(--navbar-height); bottom:0; width:20rem; background:var(--panel); /* 320px */
  border-right:0.0625rem solid var(--border); z-index:1001; overflow:auto;
}
#sidebar{left:0}
.panel.hidden{ display:none!important; }
.hidden{display:none}
.panel-section{padding:0.75rem} /* 12px */
.panel-section h2{margin:0.5rem 0 0.375rem; font-size:0.875rem} /* 8px 6px */
details{
  background:#0b1326; border:0.0625rem solid #1f2a44; border-radius:0.625rem; /* 1px 10px */
  padding:0.5rem 0.625rem; margin:0.625rem 0; /* 8px 10px */
}
summary{cursor:pointer;color:var(--muted);font-weight:700}
.chips{display:flex;flex-wrap:wrap;gap:0.5rem;margin-top:0.5rem} /* 8px */

/* LEYENDA DE BOTAS */
#legend-botas{
  display:flex;
  flex-direction:column;
  gap:0.6rem;                  /* más espacio entre burbujas */
  padding-left:1rem;           /* mantiene alineación si usas viñetas */
}
#legend-botas li{
  margin:0;
  padding:0;
  /* si quieres quitar viñetas: descomenta la línea siguiente */
  /* list-style:none; */
}

.chip{
  border:0.0625rem solid var(--chip-border); border-radius:999px; padding:0.375rem 0.75rem; /* 6px 12px */
  color:#fff; background:var(--chip); cursor:pointer; font-size:0.8125rem; /* 13px */
  user-select:none; transition:background .2s,color .2s,border-color .2s,transform .05s;
  min-height:2.25rem; min-width:2.75rem; /* 36px, 44px */
}
.chip:hover{background:#94a3b833}
.chip:active{transform:translateY(0.0625rem)} /* 1px */
.chip.active{background:#16a34a;color:#fff;border-color:#16a34a}
.btn{
  width:100%;padding:0.625rem 0.75rem;border-radius:0.625rem;border:0.0625rem solid #334155;background:#0b1326;color:#e5e7eb;cursor:pointer;margin-top:0.5rem;min-height:2.75rem; /* 10/12/10/44 */
}
.input{
  width:5rem; padding:0.375rem; border-radius:0.5rem; border:0.0625rem solid #334155; background:#0b1326; color:#e5e7eb; /* 80/6/8/1 */
}
.altitude-inputs{display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap} /* 8px */

/* =========================
   POPUP (destino) — tema claro
========================= */
.mapboxgl-popup { max-width:26.25rem; font-family: system-ui, sans-serif; } /* 420px */
.mapboxgl-popup-content{
  background:#F5F5F7; color:#1c1c1c; font-size:0.875rem; line-height:1.5;
  padding:1rem; border-radius:0.625rem;
  box-shadow:0 0.125rem 0.625rem rgba(0,0,0,.15); /* 0 2px 10px */
}
.mapboxgl-popup-content h3,
.mapboxgl-popup-content h4,
.mapboxgl-popup-content strong{ color:#1c1c1c; }
.mapboxgl-popup-close-button{
  color:#1c1c1c;
  font-size:1.125rem; /* 18px */
  top:0.5rem; right:0.625rem; /* 8px 10px */
}

/* Título clicable del destino */
.popup h3{margin:0 0 0.5rem; font-size:1.125rem; line-height:1.3} /* 18px */
.popup h3 a{
  color:#1da1f2; text-decoration:none; border:0; cursor:pointer;
}
.popup h3 a:hover{ text-decoration:underline; }

.popup .grid{display:grid;grid-template-columns:1fr 1fr;gap:0.375rem 1.125rem;margin-bottom:0.5rem} /* 6px 18px 8px */
.popup .section{margin:0.625rem 0} /* 10px */
.pills{display:flex;flex-wrap:wrap;gap:0.375rem;margin-top:0.375rem} /* 6px */
.pill{
  padding:0.25rem 0.625rem; border-radius:999px;
  border:0.0625rem solid rgba(17,24,39,.15);
  background:#b6d9ef; display:inline-block; font-size:0.75rem; /* 12px */
}
.links{display:flex;gap:0.5rem;margin-top:0.625rem;flex-wrap:wrap} /* 8px 10px */

/* ✅ Oculta enlaces a Google SOLO dentro del bloque .links */
.links a[href*="google.com"]{ display:none !important; }

/* Galería */
.gallery{display:flex;gap:0.5rem;margin-top:0.625rem;overflow-x:auto;padding-bottom:0.125rem;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}
.gallery img{height:7.5rem;width:auto;border-radius:0.5rem;object-fit:cover;flex:0 0 auto;scroll-snap-align:start;box-shadow:0 0.0625rem 0.1875rem rgba(0,0,0,.3)} /* 120px, 8px, 1px 3px */

/* =========================
   CHIP BAR (móvil)
========================= */
.chip-bar{
  position:fixed; left:0; right:0; bottom:0;
  display:flex; gap:0.5rem; align-items:center;
  overflow-x:auto; padding:0.625rem 0.75rem;
  background:#111827d0; border-top:0.0625rem solid var(--border);
  backdrop-filter:blur(0.5rem); -webkit-backdrop-filter:blur(0.5rem);
  z-index:1000;
  pointer-events:none;
}
.chip-bar .chip{white-space:nowrap; pointer-events:auto;}
.chip-bar::-webkit-scrollbar{height:0.375rem}
.chip-bar::-webkit-scrollbar-thumb{background:#475569;border-radius:999px}

/* =========================
   DESTINATION CHIPS
========================= */
.destination-chips{
  position:absolute;
  left:0.75rem;
  right:5.25rem;             /* 84px */
  bottom:0.75rem;
  display:flex;
  flex-wrap:wrap;
  gap:0.375rem;
  align-items:center;
  z-index:900;
  padding:0.375rem;
  max-width:calc(100% - 6rem); /* 96px */
  pointer-events:none;
  box-sizing:border-box;
}
.destination-chips .chip{
  white-space:nowrap;
  max-width:100%;
  overflow:hidden;
  text-overflow:ellipsis;
  pointer-events:auto;
}

/* =========================
   ACCESSIBILITY
========================= */
.mapboxgl-ctrl button:focus-visible,
button:focus-visible, a:focus-visible, select:focus-visible{
  outline:0.125rem solid #7aa2ff; outline-offset:0.125rem; /* 2px */
}

/* =========================
   RESPONSIVE
========================= */
@media (max-width:50rem){ /* 800px */
  .basemap-switcher{left:0.625rem;max-width:calc(100vw - 1.25rem)} /* 10px 20px */
}
@media (max-width:37.5rem){ /* 600px */
  :root{ --navbar-height:3.25rem; }
  .mapboxgl-popup{ max-width:min(92vw, 26.25rem); } /* 420px */
  .panel{width:100%}
}
@media (max-width:26.25rem){ /* 420px */
  .popup .grid{grid-template-columns:1fr}
  .gallery img{height:5.625rem} /* 90px */
}

/* En móvil: chips en 1 fila con scroll suave */
@media (max-width:48rem){ /* 768px */
  .destination-chips{
    right:0.75rem;
    flex-wrap:nowrap;
    overflow-x:auto;
    -webkit-overflow-scrolling:touch;
  }
  .destination-chips::-webkit-scrollbar{ display:none; }
}

/* Z-index y eventos para popups/canvas */
.mapboxgl-popup { z-index: 1100; pointer-events: auto; }
.mapboxgl-popup-content { pointer-events: auto; }
.mapboxgl-canvas-container, .mapboxgl-canvas { z-index: 0; }

/* Overlays click-through, botones clicables */
.basemap-switcher, .destination-chips, .chip-bar { pointer-events: none; }
.basemap-switcher button, .destination-chips .chip, .chip-bar .chip { pointer-events: auto; }

/* Título del destino: color y subrayado al hover */
.popup h3 a { color: #1da1f2; text-decoration: none; border: 0; cursor: pointer; }
.popup h3 a:hover { text-decoration: underline; }
